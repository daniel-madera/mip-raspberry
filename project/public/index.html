<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>MIP - Smart Home</title>
    <!-- Bootstrap -->
    <!-- <link href="css/bootstrap.min.css" rel="stylesheet"> -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- My CSS -->
    <style type="text/css">
    .led {
        width: 30px;
        height: 30px;
        border-radius: 15px;
        margin: auto;
        border: solid 1px gray;
        background: silver;
    }
    
    .led-red {
        background: #A70000;
    }
    
    .led-red.active {
        background: #f90303;
    }
    
    .led-green {
        background: #378903;
    }
    
    .led-green.active {
        background: #57e100;
    }
    
    .led-blue {
        background: #150365;
    }
    
    .led-blue.active {
        background: #3407f9;
    }
    
    .led-white {
        background: #c5c5c5;
    }
    
    .led-white.active {
        background: #ffffff;
    }
    </style>
</head>

<body>
    <!-- Header -->
    <header>
        <div class="jumbotron">
            <div class="container text-center">
                <h1>MIP - Smart Home</h1>
                <p>Dvořák, Gabriel, Kozdeba, Křížek, Maděra</p>
                <p><a href="https://github.com/daniel-madera/mip-raspberry">GitHub projektu</a></p>
            </div>
        </div>
    </header>
    <!-- Rooms -->
    <content>
        <div class="container">
            <!-- Nav tabs -->
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#bathroom" aria-controls="Bath Room" role="tab" data-toggle="tab">Koupelna</a></li>
                <li role="presentation"><a href="#hallway" aria-controls="Hallway" role="tab" data-toggle="tab">Chodba</a></li>
                <li role="presentation"><a href="#livingroom" aria-controls="Living Room" role="tab" data-toggle="tab">Obývací pokoj</a></li>
                <li role="presentation"><a href="#bedroom" aria-controls="Bed Room" role="tab" data-toggle="tab">Ložnice</a></li>
                <li role="presentation"><a href="#kitchen" aria-controls="Kitchen" role="tab" data-toggle="tab">Kuchyně</a></li>
            </ul>
            <!-- Tab panels -->
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane fade in active" id="bathroom">
                    <div class="row">
                        <div class="col-md-4">
                            <h3>Status</h3>
                            <div class="row text-center">
                                <div class="col-sm-">
                                    <div id="L1" class="led led-blue"></div>
                                    <p>modrá LED (L1)</p>
                                </div>
                            </div>
                            <h3>Ovládání</h3>
                            <div class="text-center" role="group" aria-label="Room control">
                                <button id="B1" type="button" class="btn btn-default">Tlačítko (B1)</button>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <h3>Popis</h3>
                            <p class="text-justify">
                                Koupelna je osazena jednou LED diodou modré barvy (L1) a jedním spínačem (B1). Na sepnutí spínače se příslušná LED diaoda rozsvítí a nebo zhasne podle stavu ve kterém se nachází.
                            </p>
                        </div>
                        <div class="col-md-4">
                            <h3>Schéma</h3>
                            <img class="img img-responsive" src="Bath_room.svg" style="margin: auto;">
                        </div>
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane fade" id="hallway">
                    <div class="row">
                        <div class="col-md-4">
                            <h3>Status</h3>
                            <div class="row text-center">
                                <div class="col-sm-">
                                    <div id="L2" class="led led-red"></div>
                                    <p>červená LED (L2)</p>
                                </div>
                            </div>
                            <h3>Ovládání</h3>
                            <div class="text-center" role="group" aria-label="Room control">
                                <button id="B2" type="button" class="btn btn-default">Tlačítko (B2)</button>
                                <button id="B3" type="button" class="btn btn-default">Tlačítko (B3)</button>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <h3>Popis</h3>
                            <p class="text-justify">
                                Chodba je osazena jednou LED diodou červené barvy (L2) a dvěma spínači (B2 a B3). V chodbě máme většinou spínače umístěny na obou stranách. Pokud spínačem (B2) rozsvítíme v hale, tak s ním také můžeme zhasnout a nebo k zhasnutí můžeme využít spínače (B3). Pořadí spínačů můžeme samozřejmě prohazovat.
                            </p>
                        </div>
                        <div class="col-md-4">
                            <h3>Schéma</h3>
                            <img class="img img-responsive" src="Hallway.svg" style="margin: auto;">
                        </div>
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane fade" id="livingroom">
                    <div class="row">
                        <div class="col-md-4">
                            <h3>Status</h3>
                            <div class="row text-center">
                                <div class="col-sm-6">
                                    <div id="L3" class="led led-green"></div>
                                    <p>zelená LED (L3)</p>
                                </div>
                                <div class="col-sm-6">
                                    <div id="L4" class="led led-green"></div>
                                    <p>zelená LED (L4)</p>
                                </div>
                            </div>
                            <h3>Ovládání</h3>
                            <div class="text-center" role="group" aria-label="Room control">
                                <button id="B4" type="button" class="btn btn-default">Tlačítko (B4)</button>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <h3>Popis</h3>
                            <p class="text-justify">
                                Obývací pokoj je osazen dvěma LED diodami zelené barvy (L3 a L4) a jedním spínačem (B4). Na sepnutí spínače se rozsvítí obě LED diody a při dalším sepnutí spínače obě zhasnou.
                            </p>
                        </div>
                        <div class="col-md-4">
                            <h3>Schéma</h3>
                            <img class="img img-responsive" src="Living_room.svg" style="margin: auto;">
                        </div>
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane fade" id="bedroom">
                    <div class="row">
                        <div class="col-md-4">
                            <h3>Status</h3>
                            <div class="row text-center">
                                <div class="col-sm-12">
                                    <div id="L5" class="led led-white"></div>
                                    <p>bílá LED (L5)</p>
                                </div>
                            </div>
                            <h3>Ovládání</h3>
                            <div class="text-center" role="group" aria-label="Room control">
                                <button id="B5" type="button" class="btn btn-default">Tlačítko (B5)</button>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <h3>Popis</h3>
                            <p class="text-justify">
                                Ložnice je osazena pouze jednou LED diodou bílé barvy (L5) a jedním spínačem (B5). Spínač funguje jako klascký pokojový přepínač, prvním stiknutím se světlo rozsvítí, druhým pak zhasne.
                            </p>
                        </div>
                        <div class="col-md-4">
                            <h3>Schéma</h3>
                            <img class="img img-responsive" src="Bedroom.svg" style="margin: auto;">
                        </div>
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane fade" id="kitchen">
                    <div class="row">
                        <div class="col-md-4">
                            <h3>Status</h3>
                            <div class="row text-center">
                                <div class="col-sm-6">
                                    <div id="L6" class="led led-red"></div>
                                    <p>červená LED (L6)</p>
                                </div>
                                <div class="col-sm-6">
                                    <div id="L7" class="led led-green"></div>
                                    <p>zelená LED (L7)</p>
                                </div>
                            </div>
                            <h3>Ovládání</h3>
                            <div class="text-center" role="group" aria-label="Room control">
                                <button id="B6" type="button" class="btn btn-default">Tlačítko (B6)</button>
                                <button id="B7" type="button" class="btn btn-default">Tlačítko (B7)</button>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <h3>Popis</h3>
                            <p class="text-justify">
                                Kuchyň je osazena jednou LED diodou červené barvy (L6), jednou LED diodou zelené barvy (L7) a dvěma spínači (B6 a B7). LED dioda (L6) je brána jako osvětlení místnosti a LED dioda (L7) jako osvětlení pracovní plochy. Spínačem (B6) při příchodu do kuchyně rozsvítíme osvětlení v místnosti a spínačem (B7) rozsvítíme osvětlení pracovní plochy. Při odchodu z kuchyně spínačem (B6) vypneme veškeré osvětlení v kuchyni.
                            </p>
                        </div>
                        <div class="col-md-4">
                            <h3>Schéma</h3>
                            <img class="img img-responsive" src="Kitchen.svg" style="margin: auto;">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </content>
    <!-- Footer -->
    <footer>
    </footer>
    <!-- jQuery (necessary for Bootstrap 's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <!-- Webiopi JS -->
    <script src="/webiopi.js"></script>
    <!-- My JS -->
    <script type="text/javascript">
    //update UI from response
    var update = function(macro, args, response) {
        //expected {{"L1": "1", "L2": "1"}
        console.log("UI is being updated.");
        var json = $.parseJSON(response);
        if (json.L1 == 1) {
            $("#L1").addClass('active');
        } else {
            $("#L1").removeClass('active');
        }
        if (json.L2 == 1) {
            $("#L2").addClass('active');
        } else {
            $("#L2").removeClass('active');
        }
        if (json.L3 == 1) {
            $("#L3").addClass('active');
        } else {
            $("#L3").removeClass('active');
        }
        if (json.L4 == 1) {
            $("#L4").addClass('active');
        } else {
            $("#L4").removeClass('active');
        }
        if (json.L5 == 1) {
            $("#L5").addClass('active');
        } else {
            $("#L5").removeClass('active');
        }
        if (json.L6 == 1) {
            $("#L6").addClass('active');
        } else {
            $("#L6").removeClass('active');
        }
        if (json.L7 == 1) {
            $("#L7").addClass('active');
        } else {
            $("#L7").removeClass('active');
        }
    }

    $("#B1").click(function() {
        console.log("B1 clicked");
        webiopi().callMacro("b1_clicked", [], update);
    });

    $("#B2").click(function() {
        console.log("B2 clicked");
        webiopi().callMacro("b2_clicked", [], update);
    });

    $("#B3").click(function() {
        console.log("B3 clicked");
        webiopi().callMacro("b3_clicked", [], update);
    });

    $("#B4").click(function() {
        console.log("B4 clicked");
        webiopi().callMacro("b4_clicked", [], update);
    });

    $("#B5").click(function() {
        console.log("B5 clicked");
        webiopi().callMacro("b5_clicked", [], update);
    });

    $("#B6").click(function() {
        console.log("B6 clicked");
        webiopi().callMacro("b6_clicked", [], update);
    });

    $("#B7").click(function() {
        console.log("B7 clicked");
        webiopi().callMacro("b7_clicked", [], update);
    });

    // update UI every 1000miliseconds
    setInterval(function() {
        webiopi().callMacro("status", [], update);
    }, 500);
    </script>
</body>

</html>
